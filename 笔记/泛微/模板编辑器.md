测试账号
https://weapp.mulinquan.cn/sp/ebdapp/preview/947594099259424768/setting/setting-947594133478678546/link/link-947594133478678585/contract/middle-platform/template?menuId=947594133478678585&selectedId=947594133478678585&setItem=947594133478678585
账号：18191509822/jiang0911


### 功能
- 限制编辑：（右侧）组件设置-文档保护
限制编辑的时候，在`纯文本控件` 、`富文本控件` 这两个控件内的内容可以编辑。
- [[范文库]]/[[条款库]] ：需要在组件设置 - 工具栏中添加系统工具：条款库和范文库。
- 模板套用的功能测试

### 问题
1. 右侧的表单字段，会遇到叠在一起的情况，自适应需要加强；
2. 条款库插入成功，但是条款本身修改不了，也删除不掉，导致原有的可编辑部分被分离；
3. 限制编辑和解除编辑都支持，但是第一个字和最后一个字不能编辑；
4. 表单编辑器里，应当不能编辑左侧正文；正文处应该仅置空或占位标记，或者骨架屏
5. 存在多重滚轮，编辑器横向的滚轮甚至会在页面外面，给用户困扰如何左右拖动;
6. 范文库里创建了范文之后，在编辑器里选不到；
7. 不支持选择套用指定模板，比如在三个模板里选两个；
8. 页面的右上角有两个保存按钮，用户会不知道要点哪个；
9. 模板编辑和模板套用没有做互斥设计，可以在设置模板编辑的同时，配置模板套用的按钮；
10. 配置动作流将编辑器文档写入合同文件字段比较复杂；
11. 明细表左右拖动、字段会跑出来；
12. 把设计模板的界面，建议把表单设计器的两侧的工具栏默认隐藏，不然核心的合同正文和合同字段显示的区域很小，看不清。
13. 联动出的字段，需要点一下，正文才会显示。

### 测试列表
① 【已测试，测试通过】模板制作——已有流程表单和上传的模板绑定；                                        
② 【已测试，测试通过】模板制作——单模板情况下，确保主表、明细表都可以往编辑器插入形成匹配； 
③ 【已测试，测试通过】模板制作——验证一下限制编辑的功能；
④ 【支持多模板，测试通过】模板制作——多模板确认一下是否已支持，也做一下②-③的配置；
⑤ 【已测试，测试通过】模板使用——验证一下起草时，主表填写了，编辑器是否联动填写；
⑥ 【已测试，测试通过】模板使用——验证一下起草时，明细表填写了，编辑器是否联动填写；
⑦ 【已测试，测试通过】模板使用——验证一下主表、明细表中浏览按钮填写了，编辑器是否联动填写；
⑧ 模板使用——验证一下字段联动时，联动字段编辑器是否联动填写；
⑨ 【已测试，测试通过，在同步生成】模板使用——验证一下多模板文件，填写一个表单字段后，多个模板中关联内容是否同步都在生成；
(10) 【已测试，限制编辑和解除编辑都支持，但是第一个字和最后一个字不能编辑】模板使用——验证一下限制编辑是否生效，是否可解除限制编辑；
十一 【已测试，发现冲突】模板使用——验证一下跟模板套用功能是否有冲突；
十二 【已测试，条款库生效了，范文库没有关联的地方、不生效】模板使用——验证一下条款库、范文库是否生效；
十三 整体过程中的bug列个问题清单；
先只考虑编辑器本身确保能用，不考虑wps和编辑器混用可能导致的问题；


### 编辑器方案二：用动作流实现文件套用
1. 上传模板文件，然后在接口的返回值里，获取上传文件的 `fileId` 
![](https://raw.githubusercontent.com/olivla/PicGo/main/img/20240105165410.png)

2. 配置好表单布局，然后在编辑器里拼上 `fieldId` ；
```
&tplFileId=885206267542143234
```
,按回车；确定自动填入；然后编辑器就会记住这个模板了；

3. 用动作流把生成好的合同文件，动作流添加到合同附件的字段里；
动作流 套用模板 附件：文件ID
[配置文档 参见问题11](https://www.e-cology.com.cn/sp/doc/docDetail/1999088026282271580?type=IM_View&_isEm=1&_emUid=747381046061449254&_emCid=874152414695915520)



高级表单测试
编辑器内支持使用高级表单已更新test环境 使用子布局组件使用高级表单布局，插入字段通过选中已有字段实现 请体验下目前的效果 是否满足合同业务场景 有需要优化可以及时沟通

https://weapp.yunteams.cn/sp/ebdapp/build/949016265995304962/search/949763456993542188-2740433403830410807?terminal=PC&selectedId=2740433403830410807 

15951892568/Zhangyuan0712*（可以直接预览下我这边搭建的页面 也可以自行搭建体验下） 

------------------- 另外之前提过 1、套用的文件名称是否需要优化？（目前是按照表单名称命名的 @章洁  这个麻烦合同这边确认下 是否需要组件优化 2、在不选择套用文件时，需要导出全部文件---这个需要在创建模版的时候手动点击下全部文件 目前已实现


